---
import ArticleLayout from '../layouts/ArticleLayout.astro';
import fs from 'node:fs';
import path from 'node:path';

// デモファイルの読み込み
const demoPath = path.join(process.cwd(), 'public/demos/003');
const htmlCode = fs.readFileSync(path.join(demoPath, 'index.html'), 'utf-8');
const cssCode = fs.readFileSync(path.join(demoPath, 'style.css'), 'utf-8');
---

<ArticleLayout
  title="#003 Flip Card - Code Bits"
  description="3D変形で裏返るカードUI。CSS 3D Transformsを使った実装。"
>
  <article class="article">
    <div class="container">

      <!-- 記事ヘッダー -->
      <header class="article-header">
        <div class="article-meta">
          <span class="article-number">#003</span>
          <span class="article-category">Card</span>
          <time class="article-date" datetime="2025-01-17">2025.01.17</time>
        </div>
        <h1 class="article-title">Flip Card</h1>
        <p class="article-description">
          ホバーで裏返る3Dカードアニメーション。<br>
          CSS 3D Transforms の transform-style と backface-visibility を活用した実装です。
        </p>
      </header>

      <!-- デモエリア -->
      <section class="demo-section">
        <div class="demo-header">
          <h2 class="demo-title">Demo</h2>
          <button class="demo-fullscreen-btn" id="fullscreenBtn" aria-label="フルスクリーン表示">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
            </svg>
          </button>
        </div>
        <div class="demo-container">
          <iframe src="/demos/003/index.html" id="demoFrame" title="デモ" class="demo-iframe"></iframe>
        </div>
      </section>

      <!-- HTML -->
      <section class="code-section">
        <div class="code-header">
          <h2 class="code-title">
            <span class="code-lang-icon html">HTML</span>
            index.html
          </h2>
          <button class="copy-btn" data-target="htmlCode" aria-label="コードをコピー">
            <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
            </svg>
            <span class="copy-text">Copy</span>
          </button>
        </div>
        <div class="code-block">
          <pre><code class="language-html" id="htmlCode">{htmlCode}</code></pre>
        </div>
      </section>

      <!-- CSS -->
      <section class="code-section">
        <div class="code-header">
          <h2 class="code-title">
            <span class="code-lang-icon css">CSS</span>
            style.css
          </h2>
          <button class="copy-btn" data-target="cssCode" aria-label="コードをコピー">
            <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
            </svg>
            <span class="copy-text">Copy</span>
          </button>
        </div>
        <div class="code-block">
          <pre><code class="language-css" id="cssCode">{cssCode}</code></pre>
        </div>
      </section>

      <!-- ダウンロード -->
      <section class="download-section">
        <h2 class="download-title">Download</h2>
        <p class="download-description">すべてのファイルをZIP形式でダウンロードできます。</p>
        <button class="download-btn" id="downloadBtn">
          <svg class="download-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" x2="12" y1="15" y2="3" />
          </svg>
          <span>Download ZIP</span>
        </button>
      </section>

      <!-- ナビゲーション -->
      <nav class="article-nav">
        <a href="/002-gradient-button" class="article-nav-link article-nav-link--prev">
          <span class="article-nav-label">← Previous</span>
          <span class="article-nav-title">#002 Gradient Button</span>
        </a>
        <div></div>
      </nav>

    </div>
  </article>
</ArticleLayout>
